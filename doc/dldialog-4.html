<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.8">
 <TITLE>The DLDialog Handbook: DLDialog Program Syntax</TITLE>
 <LINK HREF="dldialog-5.html" REL=next>
 <LINK HREF="dldialog-3.html" REL=previous>
 <LINK HREF="dldialog.html#toc4" REL=contents>
</HEAD>
<BODY>
<A HREF="dldialog-5.html">Next</A>
<A HREF="dldialog-3.html">Previous</A>
<A HREF="dldialog.html#toc4">Contents</A>
<HR>
<H2><A NAME="s4">4. DLDialog Program Syntax</A></H2>

<P>In the following text, contents in brackets &lt;&gt; is defined 
at other locations in this text and contents in square brackets 
[] is optional.
<H2><A NAME="ss4.1">4.1 General Syntax</A>
</H2>

<P>
<DL>
<p><DT><B><B>//</B><EM> [&lt;comment&gt;]</EM></B><DD>DLDialog ignores the rest of the line after //.
<p><DT><B><B>#</B><EM> [&lt;comment&gt;]</EM></B><DD>DLDialog ignores the rest of the line after #.
<p><DT><B><EM><B>{</B>&lt;block&gt;<B>}</B></EM></B><DD>block consists of multiple combinations of commands surrounded by braces.
<p><DT><B><EM>&lt;name&gt;</EM></B><DD>name is a single word or several words surrounded by parenthesis. A &amp;
will specify the next letter as the shortcut for this item.
<p><DT><B><B>"</B><EM>&lt;string&gt;</EM><B>" 
"</B><EM>&lt;string&gt;</EM><B>"</B></B><DD>Strings are concatenated like in ANSI C.
<p><DT><B><EM>&lt;varname&gt;</EM></B><DD>varname is a single word beginning with an alphabetic letter, 
which contains no special characters.
<p><DT><B><EM>&lt;value&gt;</EM></B><DD>value is a &lt;varname&gt;, a &lt;name&gt; or a number.
<p><DT><B><EM>&lt;executable&gt;</EM></B><DD>executable is a filename that has the executable flag set and can be 
executed by e.g. <EM>sh -c "&lt;executable&gt;"</EM>.
<P>This file will be executed and the standard output of this file will be
parsed and executed as a DLDialog program.
<P>Variables set with the executable will have global effect.
<p><DT><B><EM>&lt;command&gt;</EM><B>;</B></B><DD>normal commands end with a semicolon.
</DL>
<H2><A NAME="ss4.2">4.2 Common options</A>
</H2>

<P>The following options can be given to all commands:
<DL>
<p><DT><B><EM>[</EM><B>-fork</B></B><DD>Together with the -exec tag this will let your spawned childs live if the parent dies. 
<p><DT><B><EM>[</EM><B>-height</B>
<EM>&lt;height in percent&gt;]</EM></B><DD>Specifies the height of the element in percent 
of the parent size.
<p><DT><B><EM>[</EM><B>-width</B> 
<EM>&lt;width in percent&gt;]</EM></B><DD>Specifies the width of the element in percent of the parent size.
<p><DT><B><EM>[</EM><B>-font</B><EM> &lt;X11 font specifier&gt;]
[</EM><B>-size</B><EM> &lt;fontsize&gt;] 
[</EM><B>-bg</B><EM> &lt;backgroundcolor&gt;] 
[</EM><B>-fg</B><EM> &lt;foregroundcolor&gt;] </EM></B><DD>-font specifies the font of the element in X11/QT mode.
<P>-size specifies the size of the font. E.g. a  absolut numeric size or 
mini, small, normal, large, huge or big. Default size is 12.
<P>-bg specifies the background color of the font. Can be e.g. blue, white, "#FF0010".
<P>-fg specifies the foreground color of the font. Can be e.g. blue, white, "#FF0010".
<P>
</DL>
<H2><A NAME="ss4.3">4.3 Container Commands</A>
</H2>

<P>
<DL>
<p><DT><B><B>dialog</B>&nbsp;<EM>[&lt;name&gt;] 
[</EM><B>-modal</B><EM>] </EM><B>{</B><EM>&lt;block&gt;</EM><B>}</B></B><DD>Draws a dialog window with title &lt;name&gt; which contains the 
elements contained in &lt;block&gt;.
<P>If the argument -modal is set, input for other dialogs is blocked 
until the last modal dialog exited.
<P>There should be one or more buttons with the -exit argument in 
this dialog to let the user exit the dialog.
<p><DT><B><B>form</B>&nbsp;<EM>[&lt;name&gt;] </EM><B>{</B><EM>&lt;block&gt;</EM><B>}</B></B><DD>Draws a rectangle with title &lt;name&gt; which contains the elements
in &lt;block&gt;.
<P>DLDialog tries to order the elements more or less effective in this 
rectangle.
<p><DT><B><B>row</B> <EM>[&lt;name&gt;] </EM><B>{</B><EM>&lt;block&gt;</EM><B>}</B></B><DD>Draws a rectangle with title &lt;name&gt; which contains the elements
in &lt;block&gt;.
<P>DLDialog orders the elements in a row in this rectangle.
<p><DT><B><B>col</B> <EM>[&lt;name&gt;] </EM><B>{</B><EM>&lt;block&gt;</EM><B>}</B></B><DD>Draws a rectangle with title &lt;name&gt; which contains the elements
in &lt;block&gt;.
<P>DLDialog orders the elements in a column in this rectangle.
<p><DT><B><B>radiolist</B> <EM>[&lt;name&gt;] 
[</EM><B>-var</B><EM> &lt;varname&gt;] </EM><B>{</B><EM>&lt;block&gt;</EM><B>}</B></B><DD>Draws a rectangle with title &lt;name&gt; which contains radio buttons
in &lt;block&gt;.
<P>DLDialog orders the radio buttons in a column in this rectangle.
<P>The -var argument specifies a variable named &lt;varname&gt;.
<P>At creation this variable will be read and if set to a number, the 
radio button with this number will be activated per default.
<P>If the dialog exits the variable will be set to the number of the 
selected radio button.
<P>E.g. TESTVAR="1".
<p><DT><B><B>checklist</B> <EM>[&lt;name&gt;] 
[</EM><B>-var</B><EM> &lt;varname&gt;] </EM><B>{</B><EM>&lt;block&gt;</EM><B>}</B></B><DD>Draws a rectangle with title &lt;name&gt; which contains check buttons 
in &lt;block&gt;.
<P>DLDialog orders the check buttons in a column in this rectangle.
<P>The -var argument specifies a variable named &lt;varname&gt;.
<P>At creation this variable will be read and if set to a number(s), the 
check button(s) with this number(s) will be activated per default.
<P>If the dialog exits the variable will be set to the number(s) of the 
selected check button(s).
<P>E.g. TESTVAR="1 3 5".
<p><DT><B><B>list</B> <EM>[&lt;name&gt;] 
[</EM><B>-var</B><EM> &lt;varname&gt;] 
[</EM><B>-multi</B> <EM>]</EM> 
<B>{ listitem</B> 
<EM>[&lt;args&gt;]</EM><B>;</B>
<EM> ...</EM><B>}</B></B><DD>Draws a scrollable list with title &lt;name&gt; which contains the 
listitem elements in &lt;block&gt;.
<P>DLDialog orders the list items in a column in this rectangle.
<P>The -var argument specifies a variable named &lt;varname&gt;.
<P>At creation this variable will be read and if set to a number(s), the 
listitem(s) with this number(s) will be activated per default.
<P>If the dialog exits the variable will be set to the number(s) of the 
selected listitem(s).
<P>E.g. TESTVAR="1 3 5".
<P>The -multi argument enables multi line selection, where the line numbers,
that were selected, are stored space separated in the variable.
<P>In tvision mode <B>F7</B> marks all, <B>F8</B>unmarks all and 
<B>F9</B> toggles all.
<p><DT><B><B>combobox</B> 
<B>-var</B><EM> &lt;varname&gt;] </EM><B>{ comboitem</B> 
<EM>[&lt;args&gt;]</EM><B>;</B><EM> 
...</EM><B>}</B></B><DD>Draws a combobox with title &lt;name&gt; which contains the comboitem 
elements in &lt;block&gt;.
<P>The -var argument specifies a variable named &lt;varname&gt;.
<P>At creation this variable will be read and if set to a number(s), 
the nth comboitem will be activated per default.
<P>If the dialog exits the variable will be set to the number of the 
selected comboitem.
<P>E.g. TESTVAR="1".
</DL>
<H2><A NAME="ss4.4">4.4 Simple Commands</A>
</H2>

<P>
<DL>
<p><DT><B><B>button</B> <EM>&lt;name&gt; 
[</EM><B>-var </B><EM>&lt;varname&gt; 
[</EM><B>-set</B><EM> &lt;value&gt;] 
[</EM><B>-add </B><EM>&lt;value&gt;]] 
[</EM><B>-exec </B><EM>&lt;executable&gt;] 
[</EM><B>-image </B><EM>&lt;image file&gt;] 
[</EM><B>-movie </B><EM>&lt;movie file&gt;] 
[</EM><B>-sign </B><EM>] 
[</EM><B>-exit</B><EM>]&nbsp;</EM><B>;</B></B><DD>Draws a button labelled with &lt;name&gt;.
<P>The -var argument specifies a variable named &lt;varname&gt;, which will
be set, if the button is pressed,&nbsp; to the either the &lt;value&gt; 
specified with -set
<P>If instead of the -set argument -add is specified, the old value of 
the variable is not cleared but the &lt;value&gt; will be appended 
with a space as a separator.
<P>The -exec argument specifies an executable, which will be executed if 
the button is pressed.
<P>The -image argument specifies an image file, which will be displayed left to 
the text. If the -sign option is given additionally, the image will be 
displayed on top of the text.
<P>The -movie argument specifies an animated image file, which will be 
displayed left to the text. If the -sign option is given additionally, 
the image will be displayed on top of the text.
<P>The -exit argument means that the dialog will be terminated if the 
button is pressed.
<p><DT><B><B>checkbutton</B> <EM>&lt;name&gt; 
[</EM><B>-var </B><EM>&lt;varname&gt; 
[</EM><B>-set</B> <EM>&lt;value&gt;] 
[</EM><B>-add </B><EM>&lt;value&gt;]]&nbsp;</EM><B>;</B></B><DD>Draws a check button labelled with &lt;name&gt;.
<P>Check buttons can only be grouped with the checklist command.
<P>The -var argument specifies a variable named &lt;varname&gt;, which 
will be set if the button&nbsp; is selected to the either the &lt;value&gt;
specified with -set.
<P>If instead of the -set argument -add is specified, the old value of the
variable is not cleared but the &lt;value&gt; will be appended with a 
space as a separator.
<P>If the variable is already set to the value specified with -set or the 
variable contains a value specified with -add, the checkbutton is 
activated per default.
<p><DT><B><B>radiobutton</B> <EM>&lt;name&gt; 
[</EM><B>-var </B><EM>&lt;varname&gt; 
[</EM><B>-set</B> <EM>&lt;value&gt;] 
[</EM><B>-add </B><EM>&lt;value&gt;]]&nbsp;</EM><B>;</B></B><DD>Draws a radio button labelled with &lt;name&gt;.
<P>Radio buttons can only be grouped with the radiolist command.
<P>The -var argument specifies a variable named &lt;varname&gt;, which 
will be set ,if the button is selected, to the either the &lt;value&gt;
specified with -set.
<P>If instead of the -set argument -add is specified, the old value of 
the variable is not cleared but the &lt;value&gt; will be appended 
with a space as a separator.
<P>If the variable is already set to the value specified with -set or the 
variable contains a value specified with -add, the radiobutton is 
activated per default.
<P>NOTE: If multiple radio buttons are activated per default, the last one 
set will only be activated.
<p><DT><B><B>comboitem</B> <EM>&lt;name&gt; 
[</EM><B>-var </B><EM>&lt;varname&gt; 
[</EM><B>-set</B> <EM>&lt;value&gt;] 
[</EM><B>-add </B><EM>&lt;value&gt;]]&nbsp;</EM><B>;</B></B><DD>Draws a combobox item labeled with &lt;name&gt;.
<P>Comboitems can only be grouped with the combolist command.
<P>The -var argument specifies a variable named &lt;varname&gt;, which 
will be set ,if the item is selected, to the either the &lt;value&gt;
specified with -set.
<P>If instead of the -set argument -add is specified, the old value of 
the variable is not cleared but the &lt;value&gt; will be appended with 
a space as a separator.
<P>If the variable is already set to the value specified with -set or the
variable contains a value specified with -add, the item is activated per
default.
<P>NOTE: If multiple items are activated per default, the last one set will
only be activated.
<p><DT><B><B>listitem</B> <EM>&lt;name&gt; 
[</EM><B>-var </B> <EM>&lt;varname&gt; 
[</EM><B>-set</B> <EM>&lt;value&gt;] 
[</EM><B>-add </B><EM>&lt;value&gt;]]&nbsp;
[</EM><B>-exec </B><EM>&lt;executable&gt;] 
[</EM><B>-image </B><EM>&lt;image file&gt;] 
[</EM><B>-exit</B><EM>]&nbsp;</EM><B>;</B></B><DD>Draws a listitem labeled with &lt;name&gt;.
<P>listitems can only exists within a list block.
<P>The -var argument specifies a variable named &lt;varname&gt;, which 
will be set ,if the button is selected, to the either the &lt;value&gt;
specified with -set.
<P>If instead of the -set argument -add is specified, the old value of the
variable is not cleared but the &lt;value&gt; will be appended with a 
space as a separator.
<P>If the variable is already set to the value specified with -set or the
variable contains a value specified with -add, the listitem is activated
per default.
<P>NOTE: If multiple listitems are activated per default and -multi is not
set in the list, the last one set will only be activated.
<P>The -image argument specifies an image file, which will be displayed left to 
the text. 
<P>The -exec argument specifies an executable, which will be executed 
if the listitem is activated.
<P>The -exit argument means that the dialog will be terminated 
if the listitem is double-clicked.
<P>
<p><DT><B><B>text</B> <EM>&lt;name&gt;&nbsp;</EM><B>;</B></B><DD>Displays &lt;name&gt; as text. Should not be longer than 255 chars, 
because of some limitations in the tvision library!
<P>Text can include newlines or backslashed characters, which will be 
transformed like in C strings. E.g. \n is newline, \t 
tabulator, etc.
<p><DT><B><B>textbox</B> <EM>&lt;name&gt;&nbsp;</EM><B>;</B></B><DD>Displays &lt;name&gt; as text in a box with scrollbars, if needed.
<P>Text can include newlines or backslashed characters, which will be 
transformed like in C strings. 
E.g. \n is newline, \t tabulator, etc.
<p><DT><B><B>textbox</B> 
<B>-file </B><EM>&lt;filename&gt;&nbsp;</EM><B>;</B></B><DD>Displays the file &lt;filename&gt; as text in a box with scrollbars, 
if needed.
<p><DT><B><B>input</B> 
<B>-var </B><EM>&lt;varname&gt;
[</EM><B>-passwd</B><EM>] &nbsp;
[</EM><B>-length </B><EM>&lt;value&gt; 
[</EM><B>-numeric</B><EM>] 
[</EM><B>-ip</B><EM>]</EM><B> ;</B></B><DD>Displays an input field, which is named &lt;name&gt;.
<P>If -passwd is specified, no text is shown.
<P>If -length is specified, the field is &lt;varname&gt; long.
<P>If -numeric is specified, only numeric input is accepted
<P>If -ip is specified, only IP address formatted input is accepted
<P>-ip and -numeric cant be used together!
<P>The -var argument specifies a variable named &lt;varname&gt;, which 
will be set to the contents of the input field, if the dialog exits.
<P>If the variable is already set it will be the default value for the 
input field.
<P>The -exec argument specifies an executable, which will be executed 
if return is pressed or the dialog exits.
<P>The -exit argument means that the dialog will be terminated 
if return is pressed.
<p><DT><B><B>image</B> <EM>&lt;name&gt;&nbsp;</EM><B>;</B></B><DD>Displays an image with filename &lt;name&gt;.
<p><DT><B><B>movie</B> <EM>&lt;name&gt;&nbsp;</EM><B>;</B></B><DD>Displays an animated image with filename &lt;name&gt;.
<p><DT><B><B>gauge</B> 
<B>-var</B><EM> &lt;varname&gt; 
[</EM><B>-exec</B> <EM>&lt;executable&gt;] 
[</EM><B>-exit</B><EM>] </EM><B>;</B></B><DD>Draws a meter labeled with &lt;name&gt;.&nbsp; The meter indicates the 
percentage.
<P>The -exec argument specifies an executable, which will be executed 
immediately.
<P>New percentages are read from standard input of the executable.
Integer or double values are accepted separated by spaces. Non-digit characters
will be over-read.
The meter is updated to reflect each new percentage.
The variable specified with the varname is set to the percentage, when 
the dialog exits or to the exit status of the executable, if it exits 
with a negative value.
<P>If the -exit argument is set, the dialog will be exited if the -exec
child exits.
<p><DT><B><EM>&lt;varname&gt;</EM><B>=</B><EM>&lt;value&gt; </EM><B>;</B></B><DD>Sets the global variable &lt;varname&gt; to &lt;value&gt;.
</DL>
<H2><A NAME="ss4.5">4.5 Script Example</A>
</H2>

<P>Has no sense ... just to demonstrate all language elements of DLDialog.
<HR noshade size=1>
<PRE>
#!./dldialog -tf
 dialog "All GUI Elements" -width 100 -height 100 {
      col {
         text "A Column"; 
         button "Button 1 30%" -height 30;
         button "Button 2 70%" -height 70;
      }
      
      text ""; //Spacer
      
      col {
         text "A Row";
         row -width 100 {
            button "Button 1 20%" -width 20;
            button "Button 1 30%" -width 30;
            button "Button 2 50%" -width 50;
         }
      }
      
      text ""; //Spacer
      
      col {
         text "The Lists";
         row -width 100 {
            lv="2";
            list "A &amp;List" -width 33 -var lv {
               listitem "1. Listitem";
               listitem "2. Listitem";
               listitem "3. Listitem";
            }
            
            text "  "; //Spacer
            
            checkvar="1 3";
            checklist "A &amp;Checklist" -var checkvar -width 33 {
               checkbutton "&amp;1. checkbutton";
               checkbutton "&amp;2. checkbutton";
               checkbutton "&amp;3. checkbutton";
            }
            
            text "  "; //Spacer
            
            radiovar="2";

            radiolist "A &amp;Radiolist" -var radiovar -width 33 {
               radiobutton "&amp;1. radiobutton";
               radiobutton "&amp;2. radiobutton";
               radiobutton "&amp;3. radiobutton";
            }
         }
     }
      
      text ""; //Spacer
      col {
         STATIC_GAUGE="50";
         text "Gauges";
         row { 
           gauge  -exit -exec "sh -c 'for i in `seq 1 100`;do echo $i;sleep 1;done'";
           gauge  -var STATIC_GAUGE;
         }
      }  
      text ""; //Spacer
      row {
         text "ComboBox";
         cb="2";
         combobox -var cb {
           comboitem "Item 1" -var ci -set "1"; 
           comboitem "Item 2" -var ci -set "2"; 
           comboitem "Item 3" -var ci -set "3"; 
         }
      }  
      text ""; //Spacer
      
      row -width 100 { 
         text "Normal:"; 
         iv="bla bla bla";
         input -var iv;

         text " Numeric:"; 
         ivn="1234567890";
         input -var ivn -numeric;
         
         text " IP:"; 
         ivi="123.123.123.123";
         input -var ivi -ip;
      }
   
      text ""; //Spacer
      
      row -width 100 {
         button "&amp;OK - seen all" -exit;
         button "&amp;Source" -exec "./dldialog &lt;&lt;EOF 
           dialog \"Source\" -width 100 -height 100 {
                 textbox \"A TextBox\" -file \"../tests/test8\" -width 100 -height 100 ;
                 text \"\"; //Spacer
                 button \"OK\" -exit;
           }
EOF";
         button "&amp;Not OK - output is scrambled" -exit;
      }
}   
</PRE>
<HR noshade size='1'>
<HR>
<A HREF="dldialog-5.html">Next</A>
<A HREF="dldialog-3.html">Previous</A>
<A HREF="dldialog.html#toc4">Contents</A>
</BODY>
</HTML>
